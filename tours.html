<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tours | Imperial Experience</title>
    <meta name="description" content="Explore premium tours offered by Imperial Experience, including the Vatican & Sistine Chapel Tour, Colosseum & Ancient Rome, Rome City Highlights, Tuscany Day Trip, and more." />
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" integrity="sha512-Fo3rlrZj/kTcI3eWh4V2pwODe6acN9XZSy1F9HmHBA60xE9o3uV8Odx2bX8p7RB9Fjbj6yP/3o3qQpD4jIYAg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="styles.css" />
    <!-- AOS library for scroll animations -->
    <link rel="stylesheet" href="https://unpkg.com/aos@2.3.1/dist/aos.css" />
    <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.10.3/dist/cdn.min.js" defer></script>
    <!-- AOS JS -->
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js" defer></script>
    <!-- Tours Data -->
    <script src="tours-data.js"></script>
    <style>
      [x-cloak] { display: none !important; }
      .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
      .line-clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }
    </style>
</head>
<body class="font-sans text-gray-800">
    <!-- Navigation -->
    <nav class="bg-white shadow-md fixed w-full z-10" x-data="{ open: false }">
        <div class="container mx-auto px-4 py-3 flex items-center justify-between">
            <a href="index.html" class="text-2xl font-bold" style="color: #2d2640;">Imperial Experience</a>
            <button class="md:hidden text-gray-700 focus:outline-none" @click="open = !open">
                <i :class="open ? 'fas fa-times' : 'fas fa-bars'" class="text-2xl"></i>
            </button>
            <ul class="hidden md:flex space-x-6">
                <li><a href="index.html" class="hover:text-gray-700" style="transition: color 0.2s;">Explore</a></li>
                <li><a href="about.html" class="hover:text-gray-700" style="transition: color 0.2s;">About</a></li>
                <li><a href="tours.html" class="font-semibold" style="color: #2d2640;">Tours</a></li>
                <li><a href="tickets.html" class="hover:text-gray-700" style="transition: color 0.2s;">Tickets</a></li>
                <li><a href="contact.html" class="hover:text-gray-700" style="transition: color 0.2s;">Contact</a></li>
            </ul>
        </div>
        <div class="md:hidden" x-show="open">
            <ul class="bg-white px-4 pt-2 pb-4 space-y-2 shadow-md">
                <li><a href="index.html" class="block text-gray-700 hover:text-gray-900">Explore</a></li>
                <li><a href="about.html" class="block text-gray-700 hover:text-gray-900">About</a></li>
                <li><a href="tours.html" class="block font-semibold" style="color: #2d2640;">Tours</a></li>
                <li><a href="tickets.html" class="block text-gray-700 hover:text-gray-900">Tickets</a></li>
                <li><a href="contact.html" class="block text-gray-700 hover:text-gray-900">Contact</a></li>
            </ul>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="pt-24 md:pt-32 luxury-bg particles-bg" style="background-image: linear-gradient(135deg, rgba(26, 26, 46, 0.85), rgba(22, 33, 62, 0.85)), url('img/rome-night.jpg'); background-size: cover; background-position: center;">
        <div class="container mx-auto px-4 text-center py-16">
            <h1 class="text-4xl md:text-5xl font-bold mb-4 text-white drop-shadow-lg" data-aos="fade-down">Discover Our Premium Tours</h1>
            <p class="max-w-2xl mx-auto text-white text-opacity-90 text-lg mb-8" data-aos="fade-up">Choose from our selection of expertly curated tours showcasing the best of Rome and Italy. All tours include skip-the-line access and expert guides.</p>
        </div>
    </section>

    <!-- Search and Filter Section -->
    <section class="py-8 bg-white shadow-md sticky top-16 z-10" x-data="toursPage()" data-aos="fade-down">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-5 gap-4">
                <!-- Search -->
                <div class="md:col-span-2">
                    <div class="relative">
                        <i class="fas fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        <input type="text" 
                               x-model="filters.search" 
                               @input="filterTours()"
                               placeholder="Search tours..." 
                               class="w-full pl-10 pr-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none" style="focus:border-color: #d4af37;" />
                    </div>
                </div>
                <!-- Type Filter -->
                <div>
                    <select x-model="filters.type" @change="filterTours()" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none" style="focus:border-color: #d4af37;">
                        <option value="">All Categories</option>
                        <option value="vatican">Vatican</option>
                        <option value="colosseum">Colosseum</option>
                        <option value="city">City Tours</option>
                        <option value="food">Food & Wine</option>
                        <option value="daytrip">Day Trips</option>
                    </select>
                </div>
                <!-- Price Filter -->
                <div>
                    <select x-model="filters.price" @change="filterTours()" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none" style="focus:border-color: #d4af37;">
                        <option value="">All Prices</option>
                        <option value="budget">Under €80</option>
                        <option value="standard">€80 - €100</option>
                        <option value="premium">Over €100</option>
                    </select>
                </div>
                <!-- Duration Filter -->
                <div>
                    <select x-model="filters.duration" @change="filterTours()" class="w-full px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none" style="focus:border-color: #d4af37;">
                        <option value="">All Durations</option>
                        <option value="half">Half Day</option>
                        <option value="full">Full Day</option>
                    </select>
                </div>
            </div>
            <div class="mt-4 flex justify-between items-center">
                <p class="text-gray-600">
                    <span class="font-semibold" x-text="filteredTours().length"></span> 
                    <span x-text="filteredTours().length === 1 ? 'tour' : 'tours'"></span> found
                </p>
                <select x-model="sortBy" @change="sortTours()" class="px-4 py-2 border-2 border-gray-300 rounded-lg focus:outline-none" style="focus:border-color: #d4af37;">
                    <option value="popularity">Most Popular</option>
                    <option value="price-low">Price: Low to High</option>
                    <option value="price-high">Price: High to Low</option>
                    <option value="duration">Duration</option>
                    <option value="rating">Highest Rated</option>
                </select>
            </div>
        </div>
    </section>

    <!-- Tours Grid -->
    <section class="py-16 bg-gray-50" x-data="toursPage()">
        <div class="container mx-auto px-4">
            <div class="grid md:grid-cols-3 lg:grid-cols-4 gap-6">
                <template x-for="(tour, index) in filteredTours()" :key="tour.id">
                    <div class="bg-white rounded-lg shadow-lg hover:shadow-2xl overflow-hidden transition-all duration-300 hover-scale border-2 border-transparent" style="hover:border-color: #d4af37;"
                         data-aos="fade-up" 
                         :data-aos-delay="(index % 12) * 50">
                        <div class="relative cursor-pointer" @click="window.location.href = 'tour-' + tour.id + '.html'">
                            <img :src="tour.image" :alt="tour.name" class="w-full h-48 object-cover">
                            <div class="absolute top-2 right-2 px-3 py-1 rounded-full font-bold text-sm" style="background-color: #d4af37; color: #1a1629;">
                                <span x-text="'€' + tour.price"></span>
                            </div>
                            <div class="absolute top-2 left-2 bg-white bg-opacity-90 px-3 py-1 rounded-full text-xs font-semibold flex items-center">
                                <i class="fas fa-star mr-1" style="color: #d4af37;"></i>
                                <span x-text="tour.averageRating"></span>
                                <span class="text-gray-500 ml-1" x-text="'(' + tour.totalReviews + ')'"></span>
                            </div>
                        </div>
                        <div class="p-5">
                            <h3 class="text-lg font-bold text-gray-900 mb-2 line-clamp-2 cursor-pointer" @click="window.location.href = 'tour-' + tour.id + '.html'" x-text="tour.name"></h3>
                            <div class="flex items-center text-sm text-gray-600 mb-3">
                                <i class="fas fa-clock mr-2" style="color: #2d2640;"></i>
                                <span x-text="tour.duration"></span>
                            </div>
                            <p class="text-gray-600 mb-4 text-sm line-clamp-3" x-text="tour.description"></p>
                            <div class="flex flex-col gap-2">
                                <a :href="'booking.html?tour=' + tour.id" 
                                   @click.stop
                                   class="w-full px-4 py-2 rounded-lg font-bold transition duration-200 shadow-md text-center" style="background: linear-gradient(135deg, #d4af37 0%, #c9a961 50%, #b8965f 100%); color: #1a1629;">
                                    <i class="fas fa-calendar-check mr-2"></i>Quick Book
                                </a>
                                <a :href="'tour-' + tour.id + '.html'" 
                                   @click.stop
                                   class="w-full bg-white border-2 px-4 py-2 rounded-lg font-semibold transition duration-200 text-center" style="border-color: #2d2640; color: #2d2640;" onmouseover="this.style.backgroundColor='#f5f0e8'" onmouseout="this.style.backgroundColor='white'">
                                    View Details →
                                </a>
                            </div>
                        </div>
                    </div>
                </template>
            </div>
            
            <!-- No Results Message -->
            <div x-show="filteredTours().length === 0" class="text-center py-16">
                <i class="fas fa-search text-gray-400 text-6xl mb-4"></i>
                <h3 class="text-2xl font-bold text-gray-700 mb-2">No tours found</h3>
                <p class="text-gray-600 mb-6">Try adjusting your filters to see more results.</p>
                <button @click="resetFilters()" class="text-white px-6 py-3 rounded-full font-semibold transition" style="background-color: #2d2640;" onmouseover="this.style.backgroundColor='#3d2f52'" onmouseout="this.style.backgroundColor='#2d2640'">
                    Reset Filters
                </button>
            </div>
        </div>
    </section>



    <!-- Footer -->
    <footer class="bg-gray-900 text-gray-400 py-10">
        <div class="container mx-auto px-4 grid md:grid-cols-4 gap-8">
            <div>
                <h4 class="text-white text-lg font-semibold mb-2">Imperial Experience</h4>
                <p class="text-gray-400 text-sm">Premium tours &amp; tickets in Rome and across Italy. Discover the art, history and culture of the Bel Paese.</p>
            </div>
            <div>
                <h4 class="text-white font-semibold mb-2">Contact</h4>
                <p class="flex items-center text-sm mb-1"><i class="fas fa-phone-alt mr-2"></i> +39 06 1234 5678</p>
                <p class="flex items-center text-sm mb-1"><i class="fas fa-envelope mr-2"></i> info@imperialexperience.it</p>
                <p class="flex items-center text-sm"><i class="fas fa-map-marker-alt mr-2"></i> Via Roma 123, 00100 Rome, Italy</p>
            </div>
            <div>
                <h4 class="text-white font-semibold mb-2">Quick Links</h4>
                <ul class="space-y-1 text-sm">
                    <li><a href="about.html" class="hover:text-white">About</a></li>
                    <li><a href="tours.html" style="color: #d4af37;">Tours</a></li>
                    <li><a href="tickets.html" class="hover:text-white">Tickets</a></li>
                    <li><a href="contact.html" class="hover:text-white">Contact</a></li>
                </ul>
            </div>
            <div>
                <h4 class="text-white font-semibold mb-2">Newsletter</h4>
                <p class="text-gray-400 text-sm mb-2">Subscribe to receive updates and exclusive offers.</p>
                <form class="flex flex-col sm:flex-row">
                    <input type="email" placeholder="Email address" required class="w-full p-2 rounded-md sm:rounded-l-md sm:rounded-r-none mb-2 sm:mb-0 text-gray-800 focus:outline-none" />
                    <button type="submit" class="sm:ml-2 text-white px-4 py-2 rounded-md transition duration-200" style="background-color: #2d2640;" onmouseover="this.style.backgroundColor='#3d2f52'" onmouseout="this.style.backgroundColor='#2d2640'">Subscribe</button>
                </form>
                <div class="flex space-x-4 mt-4">
                    <a href="#" class="hover:text-white"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="hover:text-white"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="hover:text-white"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
        </div>
        <div class="mt-8 text-center text-xs text-gray-500">© 2025 Imperial Experience. All rights reserved.</div>
    </footer>
    <!-- Initialize AOS animations -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        if (window.AOS) {
          AOS.init({
            duration: 800,
            easing: 'ease-in-out',
            once: true
          });
        }
        // Show cookie banner if consent not yet recorded
        const banner = document.getElementById('cookie-banner');
        if (banner && !localStorage.getItem('cookieConsent')) {
          banner.style.display = 'flex';
        }
      });

      // Alpine.js component for tours page
      function toursPage() {
        return {
          tours: [...TOURS_DATA],
          filters: {
            search: '',
            type: '',
            price: '',
            duration: ''
          },
          sortBy: 'popularity',
          selectedTour: null,
          
          init() {
            // No initialization needed
          },
          
          filteredTours() {
            let filtered = this.tours.filter(tour => matchesTourFilters(tour, this.filters));
            
            // Apply sorting
            switch (this.sortBy) {
              case 'price-low':
                filtered.sort((a, b) => a.price - b.price);
                break;
              case 'price-high':
                filtered.sort((a, b) => b.price - a.price);
                break;
              case 'duration':
                filtered.sort((a, b) => {
                  if (a.durationCategory === b.durationCategory) return 0;
                  return a.durationCategory === 'half' ? -1 : 1;
                });
                break;
              case 'rating':
                filtered.sort((a, b) => b.averageRating - a.averageRating);
                break;
              case 'popularity':
              default:
                filtered.sort((a, b) => b.totalReviews - a.totalReviews);
                break;
            }
            
            return filtered;
          },
          
          filterTours() {
            // Filtering happens automatically via filteredTours()
          },
          
          sortTours() {
            // Sorting happens automatically via filteredTours()
          },
          
          resetFilters() {
            this.filters = {
              search: '',
              type: '',
              price: '',
              duration: ''
            };
            this.sortBy = 'popularity';
          }
        }
      }

      // Fallback: Vanilla JS implementation if Alpine.js doesn't load
      document.addEventListener('DOMContentLoaded', function() {
        // Check if Alpine is loaded after a delay
        setTimeout(function() {
          if (typeof Alpine === 'undefined') {
            console.log('Alpine.js not loaded, using fallback implementation');
            initVanillaToursPage();
          }
        }, 1000);
      });

      function initVanillaToursPage() {
        const state = {
          tours: [...TOURS_DATA],
          filters: { search: '', type: '', price: '', duration: '' },
          sortBy: 'popularity',
          selectedTour: null
        };

        function getFilteredTours() {
          let filtered = state.tours.filter(tour => matchesTourFilters(tour, state.filters));
          
          // Apply sorting
          switch (state.sortBy) {
            case 'price-low':
              filtered.sort((a, b) => a.price - b.price);
              break;
            case 'price-high':
              filtered.sort((a, b) => b.price - a.price);
              break;
            case 'duration':
              filtered.sort((a, b) => {
                if (a.durationCategory === b.durationCategory) return 0;
                return a.durationCategory === 'half' ? -1 : 1;
              });
              break;
            case 'rating':
              filtered.sort((a, b) => b.averageRating - a.averageRating);
              break;
            case 'popularity':
            default:
              filtered.sort((a, b) => b.totalReviews - a.totalReviews);
              break;
          }
          
          return filtered;
        }

        function renderTours() {
          const filtered = getFilteredTours();
          const container = document.querySelector('[x-data="toursPage()"] .grid');
          const noResults = document.querySelector('[x-show="filteredTours().length === 0"]');
          const countSpan = document.querySelector('[x-text="filteredTours().length"]');
          
          if (!container) return;

          if (filtered.length === 0) {
            container.style.display = 'none';
            if (noResults) noResults.style.display = 'block';
          } else {
            container.style.display = 'grid';
            if (noResults) noResults.style.display = 'none';
            
            container.innerHTML = filtered.map((tour, index) => `
              <div class="bg-white rounded-lg shadow-lg hover:shadow-2xl overflow-hidden transition-all duration-300 hover-scale border-2 border-transparent" style="transition: border-color 0.3s;"
                   data-tour-id="${tour.id}"
                   data-aos="fade-up" 
                   data-aos-delay="${(index % 12) * 50}">
                <div class="relative cursor-pointer" onclick="window.location.href='tour-${tour.id}.html'">
                  <img src="${tour.image}" alt="${tour.name}" class="w-full h-48 object-cover">
                  <div class="absolute top-2 right-2 px-3 py-1 rounded-full font-bold text-sm" style="background-color: #d4af37; color: #1a1629;">
                    €${tour.price}
                  </div>
                  <div class="absolute top-2 left-2 bg-white bg-opacity-90 px-3 py-1 rounded-full text-xs font-semibold flex items-center">
                    <i class="fas fa-star mr-1" style="color: #d4af37;"></i>
                    <span>${tour.averageRating}</span>
                    <span class="text-gray-500 ml-1">(${tour.totalReviews})</span>
                  </div>
                </div>
                <div class="p-5">
                  <h3 class="text-lg font-bold text-gray-900 mb-2 line-clamp-2 cursor-pointer" onclick="window.location.href='tour-${tour.id}.html'">${tour.name}</h3>
                  <div class="flex items-center text-sm text-gray-600 mb-3">
                    <i class="fas fa-clock mr-2" style="color: #2d2640;"></i>
                    <span>${tour.duration}</span>
                  </div>
                  <p class="text-gray-600 mb-4 text-sm line-clamp-3">${tour.description}</p>
                  <div class="flex flex-col gap-2">
                    <a href="booking.html?tour=${tour.id}" 
                       onclick="event.stopPropagation()"
                       class="w-full px-4 py-2 rounded-lg font-bold transition duration-200 shadow-md text-center" style="background: linear-gradient(135deg, #d4af37 0%, #c9a961 50%, #b8965f 100%); color: #1a1629;">
                      <i class="fas fa-calendar-check mr-2"></i>Quick Book
                    </a>
                    <a href="tour-${tour.id}.html" 
                       onclick="event.stopPropagation()"
                       class="w-full bg-white border-2 px-4 py-2 rounded-lg font-semibold transition duration-200 text-center" style="border-color: #2d2640; color: #2d2640;">
                      View Details →
                    </a>
                  </div>
                </div>
              </div>
            `).join('');

          }

          if (countSpan) {
            countSpan.textContent = filtered.length;
          }
        }

        // Set up event listeners
        document.querySelectorAll('[x-model="filters.search"]').forEach(input => {
          input.addEventListener('input', function() {
            state.filters.search = this.value;
            renderTours();
          });
        });

        document.querySelectorAll('[x-model="filters.type"]').forEach(select => {
          select.addEventListener('change', function() {
            state.filters.type = this.value;
            renderTours();
          });
        });

        document.querySelectorAll('[x-model="filters.price"]').forEach(select => {
          select.addEventListener('change', function() {
            state.filters.price = this.value;
            renderTours();
          });
        });

        document.querySelectorAll('[x-model="filters.duration"]').forEach(select => {
          select.addEventListener('change', function() {
            state.filters.duration = this.value;
            renderTours();
          });
        });

        document.querySelectorAll('[x-model="sortBy"]').forEach(select => {
          select.addEventListener('change', function() {
            state.sortBy = this.value;
            renderTours();
          });
        });

        // Reset filters button
        document.querySelectorAll('[\\@click="resetFilters()"], button[onclick*="resetFilters"]').forEach(btn => {
          btn.addEventListener('click', function() {
            state.filters = { search: '', type: '', price: '', duration: '' };
            state.sortBy = 'popularity';
            document.querySelectorAll('[x-model]').forEach(el => {
              if (el.tagName === 'INPUT') el.value = '';
              if (el.tagName === 'SELECT') el.selectedIndex = 0;
            });
            renderTours();
          });
        });

        // Initial render
        renderTours();
      }
    </script>

    <!-- Cookie Consent Banner -->
    <div id="cookie-banner" class="fixed bottom-0 left-0 right-0 z-50 hidden flex-col md:flex-row items-center justify-between bg-gray-900 text-white p-4" style="display:none;">
        <p class="mb-2 md:mb-0 text-sm">We use cookies to improve your experience on our site. By continuing to browse, you accept our cookie policy.</p>
        <button id="accept-cookies" class="text-white px-4 py-2 rounded-md text-sm transition duration-200" style="background-color: #2d2640;" onmouseover="this.style.backgroundColor='#3d2f52'" onmouseout="this.style.backgroundColor='#2d2640'">Accept</button>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function() {
        const acceptBtn = document.getElementById('accept-cookies');
        const banner = document.getElementById('cookie-banner');
        if (acceptBtn) {
          acceptBtn.addEventListener('click', function() {
            localStorage.setItem('cookieConsent', 'true');
            if (banner) banner.style.display = 'none';
          });
        }
      });
    </script>
</body>
</html>
